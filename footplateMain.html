<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Footplate Inspection Form</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Times New Roman', Times, serif;
    }

    body {
        background-color: #e0f7fa;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 1rem;
    }

    .main {
        width: 100%;
        max-width: 600px;
        background-color: #ffffff;
        padding: 2rem;
        border-radius: 0.5rem;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }

    .main h3 {
        font-size: 1.75rem;
        color: #222;
        text-align: center;
        margin-bottom: 1.5rem;
    }

    .main form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .form-outer {
        width: 100%;
    }

    .form-outer label {
        display: block;
        color: #d32f2f;
        font-weight: 600;
        margin-bottom: 0.5rem;
        font-size: 0.95rem;
    }

    .form-outer input,
    .form-outer select {
        width: 100%;
        padding: 0.75rem 1rem;
        background-color: #f1f5f9;
        border: 1px solid #cbd5e1;
        border-radius: 0.375rem;
        font-size: 1rem;
        transition: border 0.2s ease;
    }

    .form-outer input:focus,
    .form-outer select:focus {
        border-color: #7c3aed;
        outline: none;
        background-color: #ffffff;
    }

    .form-outer button {
        width: 100%;
        padding: 0.75rem;
        background-color: #7c3aed;
        color: #ffffff;
        font-size: 1rem;
        font-weight: 600;
        border: none;
        border-radius: 0.375rem;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .form-outer button:hover {
        background-color: #5b21b6;
    }

    .radio-inline {
        display: inline-flex;
        align-items: center;
        margin-right: 1rem;
    }

    .radio-inline input {
        margin-right: 0.4rem;
    }

    .container {
        margin: 0.75rem 0;
    }

    .uppercase {
        text-transform: uppercase;
    }

    .justify-content {
        margin: 1rem 0;
    }

    /* Mobile-specific tweaks */
    @media (max-width: 600px) {
        .main {
            padding: 1.25rem;
            border-radius: 0.375rem;
        }

        .main h3 {
            font-size: 1.5rem;
        }

        .form-outer input,
        .form-outer select,
        .form-outer button {
            font-size: 1rem;
            padding: 0.75rem;
        }

        .form-outer label {
            font-size: 0.9rem;
        }
    }
</style>

    </style>
</head>
<body>
    <div class="container">
        <h2>Footplate Inspection Form</h2>
        <form id="inspectionForm">
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">CMS ID<b style="color: blue;">**Enter last digits of CLI CMS ID Only,ex if CLI CMS ID is BSL0048 enter only 48,ex if CLI CMS ID is BSL0106 enter only 106**</b></p></label>
                <input type="number" name="inspectionid" id="inspectionid" required>
            </div>

            <div class="form-outer">
                <label style="color: red; font-weight: bold;">Inspection Date</label>
                <input type="date" name="inspectiondate" id="inspectiondate" required>       
            </div>
            
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">CLI Name</label>
                <input type="text" name="cliname" id="cliname" required readonly>
            </div>
            <br>
            <div class="justify-content">
            <label style="color: red; font-weight: bold;">Select LP Nominated Or Other</label>
            <div class="container">
                <label for="nomi" class="radio-inline">NOMINATED
                    <input type="radio" id="nomi" name="selectlp" value="NOMINATED">
                </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <label for="other" class="radio-inline">OTHER
                    <input type="radio" id="other" name="selectlp" value="OTHER" checked>
                </label>
            </div> <br>  
            </div>
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">LP CMS ID</label>
                <input type="text" name="lpcmsid" id="lpcmsid">
            </div>
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">LP Name</label>
                <input type="text" name="lpname" id="lpname" >
            </div>
            <div class="form-outer">
                <div>
                    <label for="lptype">LP Designation</label>
                    <div class="form-outer">
                        <select name="lptype" id="lptype">
                            <option value="">select</option>
                            <option value="LPG">LPG</option>
                            <option value="LPM">LPM</option>
                            <option value="LPP">LPP</option>
                            <option value="LPS">LPS</option>
                            <option value="LPTW">LPTW</option>
                        </select>
                    </div> 
                </div>
            </div>
            <div class="form-outer">
                <div>
                    <label for="lpcat">LP CAT</label>
                    <select name="lpcat" id="lpcat">
                        <option value="">select</option>
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="C">C</option>
                    </select> 
                </div>
            </div>
            <div class="form-outer">
                <div>
                    <label for="lphq">LP HQ</label>
                    <select name="lphq" id="lphq">
                        <option value="">select</option>
                        <option value="BSL">BSL</option>
                        <option value="BSLX">BSLX</option>
                        <option value="BD">BD</option>
                        <option value="NGN">NGN</option>
                        <option value="KNW">KNW</option>
                        <option value="IGPX">IGPX</option>
                        <option value="MMR">MMR</option>
                        <option value="CSMT">CSMT</option>
                        <option value="PA">PA</option>
                        <option value="UDN">UDN</option>
                        <option value="NDB">NDB</option>
                        <option value="BPL">BPL</option>
                        <option value="ET">ET</option>
                        <option value="NGP">NGP</option>
                        <option value="BPQ">BPQ</option>
                        <option value="SUR">SUR</option>
                        <option value="PB">PB</option>
                        <option value="JL">JL</option>
                        <option value="JM">JM</option>
                        <option value="AK">AK</option>
                        <option value="CSN">CSN</option>
                        <option value="WR">WR</option>
                    </select> 
                </div>
            </div>

            <div class="justify-content">
                <label style="color: red; font-weight: bold;">Select ALP Nominated Or Other</label><br><br>
                <div class="container">
                    <label for="nomi" class="radio-inline">NOMINATED
                    <input type="radio" id="nomi" name="selectalp" value="NOMINATED">
                    </label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                    <label for="other" class="radio-inline">OTHER
                    <input type="radio" id="other" name="selectalp" value="OTHER">
                    </label>
                </div>   
            </div><br>
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">ALP CMS ID</label>
                <input type="text" name="alpcmsid" id="alpcmsid">
            </div>
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">ALP Name</label>
                <input type="text" name="alpname" id="alpname">
            </div><br>
            <div class="form-outer">
                <div>
                    <label for="alpdesg">ALP DESG</label>
                    <div>
                        <select name="alpdesg" id="alpdesg">
                            <option value="">select</option>
                            <option value="ALP">ALP</option>
                            <option value="SALP">SALP</option>
                            <option value="COLP">COLP</option>
                        </select> 
                    </div> 
                </div>
            </div>
            <div class="form-outer">
                <div>
                    <label for="alphq">ALP HQ</label>
                    <select name="alphq" id="alphq">
                        <option value="">select</option>
                        <option value="BSL">BSL</option>
                        <option value="BSLX">BSLX</option>
                        <option value="BD">BD</option>
                        <option value="NGN">NGN</option>
                        <option value="KNW">KNW</option>
                        <option value="IGPX">IGPX</option>
                        <option value="MMR">MMR</option>
                        <option value="CSMT">CSMT</option>
                        <option value="PA">PA</option>
                        <option value="UDN">UDN</option>
                        <option value="NDB">NDB</option>
                        <option value="BPL">BPL</option>
                        <option value="ET">ET</option>
                        <option value="NGP">NGP</option>
                        <option value="BPQ">BPQ</option>
                        <option value="SUR">SUR</option>
                        <option value="PB">PB</option>
                        <option value="JL">JL</option>
                        <option value="JM">JM</option>
                        <option value="AK">AK</option>
                        <option value="CSN">CSN</option>
                        <option value="WR">WR</option>
                    </select> 
                </div>
            </div>
            <div class="form-outer">
                <label for="trainNumber" style="color: red; font-weight: bold;">Train Number:</label>
                <input type="text" name="trainNumber" id="trainNumber" placeholder="Enter train number" class="uppercase" 
                    oninput="checkInput()">
            </div>
            
            <script>
                function checkInput() {
                    // Get the value of the input field
                    const inputValue = document.getElementById('trainNumber').value.toUpperCase();
            
                    // Check for restricted words
                    const restrictedWords = ['REST', 'LEAVE', 'COUNSELLING', 'WAITING DUTY'];
            
                    // If any of the restricted words are found
                    if (restrictedWords.some(word => inputValue.includes(word))) {
                        // Display alert
                        alert("Do not enter 'leave', 'rest', 'lobby counselling','WAITING DUTY' in the Train Number field. Fill IT in the remark.");
            
                        // Speak the message in Hindi
                        const speech = new SpeechSynthesisUtterance('TNO में "LEAVE", "REST", "COUNSELLING" या "WAITING DUTY" शब्द नहीं भरें। टिप्पणी में भरे।');
                        speech.lang = 'hi-IN';  // Set language to Hindi
                        window.speechSynthesis.speak(speech);
                    }
                }
            </script>
            
            
            <div class="form-outer">
                <label for="trainLoad" style="color: red; font-weight: bold;">Train Load (in Tonn):</label>
                <input type="number" name="trainLoad" id="trainLoad" placeholder="Enter train load">
            </div>
            
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">Loco No</label>
                <input type="text" name="locono">
            </div>
            <div class="justify-content">
                <label style="color: red; font-weight: bold;">Select Whether BMBS% GREATER Than 50%</label><br><br>
                    <div class="container">
                        <label for="YES" class="radio-inline">YES
                            <input type="radio" id="bmbsyes" name="selectbmbs" value="YES">
                        </label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                        <label for="NO" class="radio-inline">NO
                            <input type="radio" id="bmbsno" name="selectbmbs" value="NO">
                        </label><br><br>
                    </div>   
            </div>
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">From Station<p><b style="color: blue;">**Enter Station Code Only**</b></p></label>
                <input type="text" name="fromstation" id="fromstation" oninput="upperCase()" class="uppercase" required>
            </div>
            <div class="container">
                <label for="startTime" style="color: red; font-weight: bold;">Departure Date And Time (HH:MM):</label>
                <input type="datetime-local" id="startTime" name="startTime" required>
            </div><br>
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">To Station<p style="color: blue;"><b>**Enter Station Code Only**</b></p></label>
                <input type="text" name="tostation" id="tostation"  class="uppercase" required>
            </div>
            <div class="container">
                <label for="endTime" style="color: red; font-weight: bold;">Arrival Date And Time (HH:MM):</label>
                <input type="datetime-local" id="endTime" name="endTime" required>
            </div><br>
            <script>
                const startTimeInput1 = document.getElementById('startTime');
                const endTimeInput1 = document.getElementById('endTime');
                
                endTimeInput1.addEventListener('change', function() {
                    const startTime = new Date(startTimeInput1.value);
                    const endTime = new Date(endTimeInput1.value);
                    
                    if (startTime && endTime && endTime <= startTime) {
                        alert('End time cannot be less than or equal to start time. Please select a NEXT date.');
                        endTimeInput1.value = ''; // Clear the invalid end time input
                    }
                });
            </script>
            <div class="form-outer">
                <label for="signalcallinglp" style="color: red; font-weight: bold;">Signal Calling By LP</label>
                <select name="sigcalllp" id="sigcalllp" onchange="if (this.value === 'POOR') { alert('You have selected POOR option, it will be considered as irregularity.'); }">
                    <option value="select">-------Select Signal Calling By Loco Pilot-------</option>
                    <option value="GOOD">GOOD(WITH HAND GESTURE)</option>
                    <option value="AVERAGE">AVERAGE(WITHOUT HAND GESTURE)</option>
                    <option value="POOR">POOR(NOT CALLING)</option>
                </select>
            </div>
            <br>
            <div class="form-outer">
                <label for="signalcallingalp" style="color: red; font-weight: bold;">Signal Caling By ALP</label>
                <select name="sigcallalp" id="sigcallalp" onchange="if (this.value === 'POOR') { alert('You have selected POOR option, it will be considered as irregularity.'); }" >
                    <option value="select">-------Select Signal Calling By Assistant Loco Pilot-------</option>
                    <option value="GOOD">GOOD(WITH HAND GESTURE)</option>
                    <option value="AVERAGE">AVERAGE(WITHOUT HAND GESTURE)</option>
                    <option value="POOR">POOR(NOT CALLING)</option>
                </select>
            </div>
            <br>
            <div class="justify-content">
                <label style="color: red; font-weight: bold;" style="color: red; font-weight: bold;">Signal Exchange By ALP</label><br><br>
                <div class="container">
                    <label for="YES" class="radio-inline">YES
                        <input type="radio" id="yes" name="sigexchange" value="YES">
                    </label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                    <label for="NO" class="radio-inline">NO
                        <input type="radio" id="no" name="sigexchange" value="NO" onchange="if (this.value === 'NO') { alert('You have selected NO option, it will be considered as irregularity.'); }" >
                    </label><br><br>
                </div>   
            </div>
            <br>
            <div class="justify-content">
                <label style="color: red; font-weight: bold;" style="color: red; font-weight: bold;">BFT</label><br><br>
                <div class="container">
                    <label for="YES" class="radio-inline">YES
                        <input type="radio" id="yes" name="bft" value="YES">
                    </label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                    <label for="NO" class="radio-inline">NO
                        <input type="radio" id="no" name="bft" value="NO" onchange="if (this.value === 'NO') { alert('You have selected NO option, it will be considered as irregularity.'); }">
                    </label> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                    <label for="NA" class="radio-inline">NA
                        <input type="radio" id="na" name="bft" value="N A">
                    </label><br><br>
                </div>   
            </div>
            <div class="justify-content">
                <label style="color: red; font-weight: bold;" style="color: red; font-weight: bold;">BPT</label><br><br>
                <div class="container">
                    <label for="YES" class="radio-inline">YES
                        <input type="radio" id="yes" name="bpt" value="YES">
                    </label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                    <label for="NO" class="radio-inline">NO
                        <input type="radio" id="no" name="bpt" value="NO" onchange="if (this.value === 'NO') { alert('You have selected NO option, it will be considered as irregularity.'); }">
                    </label> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                    <label for="NA" class="radio-inline">NA
                        <input type="radio" id="na" name="bpt" value="N A">
                    </label><br><br>
                </div>   
            </div>
            <div class="justify-content">
                <label style="color: red; font-weight: bold;" style="color: red; font-weight: bold;">Observe Caution Order</label><br><br>
                <div class="container">
                    <label for="YES" class="radio-inline">YES
                        <input type="radio" id="yes" name="observeco" value="YES">
                    </label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                    <label for="NO" class="radio-inline">NO
                        <input type="radio" id="no" name="observeco" value="NO" onchange="if (this.value === 'NO') { alert('You have selected NO option, it will be considered as irregularity.'); }">
                    </label><br><br>
                </div>   
            </div>
            <br>
            <div class="form-outer">
                <label for="knowledge" style="color: red; font-weight: bold;">Knowledge-->Loco Pilot</label>
                <select name="knowledgelp" id="knowledgelp" onchange="if (this.value === 'POOR') { alert('You have selected POOR option, it will be considered as irregularity.'); }">
                    <option value="select">-------Select Knowledge Of Loco Pilot-------</option>
                    <option value="GOOD">GOOD</option>
                    <option value="AVERAGE">AVERAGE</option>
                    <option value="POOR">POOR</option>
                </select>
            </div>
            <br>
            <div class="form-outer">
                <label for="knowledge" style="color: red; font-weight: bold;">Knowledge-->Assistant Loco Pilot</label>
                <select name="knowledgealp" id="knowledgealp"  onchange="if (this.value === 'POOR') { alert('You have selected POOR option, it will be considered as irregularity.'); }">
                    <option value="select">-------Select Knowledge Of Assistant Loco Pilot-------</option>
                    <option value="GOOD">GOOD</option>
                    <option value="AVERAGE">AVERAGE</option>
                    <option value="POOR">POOR</option>
                </select>
            </div>
            <br>
            <div class="form-outer">
                <label for="knowledge" style="color: red; font-weight: bold;">Mobile</label>
                <select name="mobile" id="mobile" onchange="handleSelectionChange(this)">
                    <option value="select">-------Select Mobile Condition Of Crew-------</option>
                    <option value="OFF">OFF(Both)</option>
                    <option value="LPON">LP ON And ALP OFF</option>
                    <option value="ALPON">ALP ON And LP OFF</option>
                    <option value="ON">ON(Both)</option>
                </select>
            </div>
            
            <script>
                function handleSelectionChange(selectElement) {
                    var value = selectElement.value;
                    if (value === 'LPON') {
                        alert('You have selected LPON option, it will be considered as irregularity.');
                    } else if (value === 'ALPON') {
                        alert('You have selected ALPON option, it will be considered as irregularity.');
                    } else if (value === 'ON') {
                        alert('You have selected ON option, it will be considered as irregularity.');
                    }
                }
            </script>
            
            <br>
            <div class="form-outer">
                <label for="whistling" style="color: red; font-weight: bold;">Whisteling By ALP</label>
                <select name="whistling" id="whistling" onchange="if (this.value === 'POOR') { alert('You have selected POOR option, it will be considered as irregularity.'); }">
                    <option value="select">-------Select Whisteling By Assistant Loco Pilot-------</option>
                    <option value="GOOD">GOOD</option>
                    <option value="AVERAGE">AVERAGE</option>
                    <option value="POOR">POOR</option>
                </select>
            </div>
            <br>
            <div class="justify-content">
                <label style="color: red; font-weight: bold;" style="color: red; font-weight: bold;">Loco Checking</label><br><br>
                <div class="container">
                    <label for="YES" class="radio-inline">YES
                        <input type="radio" id="yes" name="lococheck" value="YES">
                    </label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                    <label for="NO" class="radio-inline">NO
                        <input type="radio" id="on" name="lococheck" value="NO" onchange="if (this.value === 'NO') { alert('You have selected NO option, it will be considered as irregularity.'); }">
                    </label><br><br>
                </div>   
            </div>
            <br>
            <div class="form-outer">
                <label for="speedy" style="color: red; font-weight: bold;">Speed At One Yellow</label>
                <select name="speedy" id="speedy" onchange="checkIrregularity(this)">
                    <option value="select">-------Select Speed-------</option>
                    <option value="BELOW30">BELOW 30</option>
                    <option value="30 - 40">30 - 40</option>
                    <option value="40 - 50">40 - 50</option>
                    <option value="ABOVE50">ABOVE 50</option>
                </select>
            </div>
            <br>
            <script>
    // Function to check the conditions and alert if irregularity occurs
    function checkIrregularity() {
        var coachChecked = document.getElementById('coach').checked;
        var goodsChecked = document.getElementById('goods').checked;
        var speedSelected = document.getElementById('speedy').value;

        // Check for irregularities
        if ((goodsChecked && (speedSelected === '40 - 50' || speedSelected === 'ABOVE50')) ||
            (coachChecked && (speedSelected === 'ABOVE50'))) {
            alert("This will be considered as an irregularity.");
        }
    }

    // Event listeners for the radio buttons and the speed dropdown
    document.getElementById('coach').addEventListener('change', checkIrregularity);
    document.getElementById('goods').addEventListener('change', checkIrregularity);
    document.getElementById('speedy').addEventListener('change', checkIrregularity);
</script>
            
            <div class="justify-content">
                <label style="color: red; font-weight: bold;">ALP Hand On RS</label><br><br>
                <div class="container">
                    <label for="YES" class="radio-inline">YES
                        <input type="radio" id="yes" name="handrs" value="YES">
                    </label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                    <label for="NO" class="radio-inline">NO
                        <input type="radio" id="on" name="handrs" value="NO" onchange="if (this.value === 'NO') { alert('You have selected NO option, it will be considered as irregularity.'); }">
                    </label><br><br>
                </div>   
            </div>
            <br>
           <div class="form-outer">
    <label for="luggage" style="color: red; font-weight: bold;">Luggage Packing</label>
    <select name="luggage" id="luggage" onchange="handleSelectionChangeLuggage(this)">
        <option value="select">-------Select Luggage Packing-------</option>
        <option value="NO">NO</option>
        <option value="ALP LUGGAGE PACKING">ALP LUGGAGE PACKING</option>
        <option value="LP LUGGAGE PACKING">LP LUGGAGE PACKING</option>
        <option value="YES">YES BOTH LUGGAGE PACKING</option>
    </select>
</div>
<br>
<script>
    function handleSelectionChangeLuggage(selectElement) {
        var value = selectElement.value;
        if (value === 'ALP LUGGAGE PACKING') {
            alert('You have selected ALP LUGGAGE PACKING option, it will be considered as irregularity.');
        } else if (value === 'LP LUGGAGE PACKING') {
            alert('You have selected LP LUGGAGE PACKING option, it will be considered as irregularity.');
        } else if (value === 'YES') {
            alert('You have selected YES option, it will be considered as irregularity.');
        }
    }
</script>
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">LP Due Date</label>
                <input type="date" name="lpduedate" id="lpduedate" readonly>
            </div>
            <div class="justify-content">
                <label style="color: red; font-weight: bold;">COACHING/GOODS</label><br><br>
                <div class="container">
                    <label for="COACHING" class="radio-inline">COACHING
                    <input type="radio" id="coach" name="coachgd" value="COACHING">
                    </label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                    <label for="GOODS" class="radio-inline">GOODS
                    <input type="radio" id="goods" name="coachgd" value="GOODS">
                    </label><br><br>
                </div>   
            </div>
            <div class="justify-content">
                <label style="color: red; font-weight: bold;">LOADED/EMPTY</label><br><br>
                <div class="container">
                    <label for="loaded" class="radio-inline">LOADED
                    <input type="radio" id="load" name="loademp" value="LOADED">
                    </label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                    <label for="empty" class="radio-inline">EMPTY
                    <input type="radio" id="empty" name="loademp" value="EMPTY">
                    </label><br><br>
                </div>   
            </div>
            <div class="justify-content">
                <label style="color: red; font-weight: bold;">DAY/NIGHT</label><br><br>
                    <div class="container">
                        <label for="day" class="radio-inline">DAY
                            <input type="radio" id="day" name="dynt" value="DAY">
                        </label>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                        <label for="night" class="radio-inline">NIGHT
                            <input type="radio" id="night" name="dynt" value="NIGHT">
                        </label><br><br>
                    </div>   
            </div>
           
            <p style="text-align: center; font-weight: bolder;">---------------------------------------------------</p><br>
            <h2>Ambush Check In Lobby</h2>
             <div class="form-outer">
                <label style="color: red; font-weight: bold;">LOBBY COUNSELLING</label>
                <input type="number" name="lbcounsel" id="lbcounsel" placeholder="ENTER THE NO OF STAFF COUNSELLED IN LOBBY " >
            </div>
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">Speed Gun</label>
                <input type="number" name="speedgun" id="speedgun" >
            </div>
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">No Of Random BA Test</label>
                <input type="number" name="ba" id="ba">
            </div>
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">Vulnerable Signal/Lay Out</label>
                <input type="number" name="vsiglayout" id="vsiglayout">
            </div>
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">Yard Layout</label>
                <input type="number" name="ylayout" id="ylayout">
            </div>
            <div class="justify-content">
                <label style="color: red; font-weight: bold;">C/O Acknowledge</label><br><br>
                <div class="container">
                    <label for="irregularityYes" class="radio-inline">YES
                        <input type="radio" id="coyes" name="coack" value="YES">
                    </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <label for="irregularityNo" class="radio-inline">NO
                        <input type="radio" id="cono" name="coack" value="NO" onchange="if (this.value === 'NO') { alert('You have selected NO option, it will be considered as irregularity.'); }">
                    </label><br><br>
                </div>   
            </div>
            <div class="justify-content">
                <label style="color: red; font-weight: bold;">Late Sign ON/OFF</label><br><br>
                <div class="container">
                    <label for="irregularityYes" class="radio-inline">YES
                        <input type="radio" id="signonoff" name="signonoff" value="YES" onchange="if (this.value === 'YES') { alert('You have selected YES option, it will be considered as irregularity.'); }">
                    </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <label for="irregularityNo" class="radio-inline">NO
                        <input type="radio" id="signonoff" name="signonoff" value="NO">
                    </label><br><br>
                </div>   
            </div>
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">Lobby RS Flap Valve</label>
                <input type="text" name="rs" id="rs">
            </div>
            <p style="text-align: center; font-weight: bolder;">---------------------------------------------------</p><br>
            <h2>Check In Yard</h2>
            <div class="justify-content">
                <label style="color: red; font-weight: bold;">Shunting</label><br><br>
                <div class="container">
                    <label for="irregularityYes" class="radio-inline">PROPER
                        <input type="radio" id="shuntingy" name="shunting" value="PROPER">
                    </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <label for="irregularityNo" class="radio-inline">NOT PROPER
                        <input type="radio" id="shuntingn" name="shunting" value="NOT PROPER" onchange="if (this.value === 'NOT PROPER') { alert('You have selected NOT PROPER option, it will be considered as irregularity.'); }">
                    </label><br><br>
                </div>   
            </div>
            <div class="justify-content">
                <label style="color: red; font-weight: bold;">Loco Stabling,T/S,Stn</label><br><br>
                <div class="container">
                    <label for="irregularityYes" class="radio-inline">PROPER
                        <input type="radio" id="lstby" name="lstb" value="PROPER">
                    </label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <label for="irregularityNo" class="radio-inline">NOT PROPER
                        <input type="radio" id="lstbn" name="lstb" value="NOT PROPER" onchange="if (this.value === 'NOT PROPER') { alert('You have selected NOT PROPER option, it will be considered as irregularity.'); }">
                    </label><br><br>
                </div>   
            </div>
            <div class="form-outer">
                <label style="color: red; font-weight: bold;">REMARK</label>
                <input type="text" name="remark" id="remark">
            </div>
             <div class="justify-content">
                <label style="color: red; font-weight: bold;">Select SAFETY DRIVE</label>
                <div class="container">
                    <label for="sd1" class="radio-inline">31/2025
                        <input type="checkbox" id="sd1" name="sd1" value="31/2025">
                    </label>&nbsp;&nbsp;&nbsp;
                   <!-- <label for="sd2" class="radio-inline">24/2025
                        <input type="checkbox" id="sd2" name="sd2" value="24/2025">
                    </label>&nbsp;&nbsp;&nbsp;
                   <label for="sd3" class="radio-inline">25/2025
                           <input type="checkbox" id="sd3" name="sd3" value="25/2025"> -->
                    </label><br> <br><br>
                    <a style="color:red;" href="https://drive.google.com/file/d/1Z_BGuIEfYSwQjYdAd0iIsFnFD2HV22W4/view?usp=sharing">***Click Here To View PDF of Safety Drive-31/2025***</a><br><br>
                    <!-- <a style="color:red;" href="https://drive.google.com/file/d/1TMFF0xwm3bKJNYj-9h86xfYKcqWZqk3s/view?usp=sharing">***Click Here To View PDF of Safety Drive-24/2025***</a><br><br>
                    <a style="color:red;" href="https://drive.google.com/file/d/1fa4YEJ_E3Y2ermSuA7fjgSdN29h2aysF/view?usp=sharing">***Click Here To View PDF of Safety Drive-25/2025***</a> -->
                </div> <br>  
                </div>
                <div class="justify-content">
                    <label style="color: red; font-weight: bold;">Select GI</label>
                    <div class="container">
                        <label for="gi1" class="radio-inline">22/2025
                            <input type="checkbox" id="gi1" name="gi1" value="22/2025">
                        </label>&nbsp;&nbsp;&nbsp;
                        <label for="gi2" class="radio-inline">23/2025
                            <input type="checkbox" id="gi2" name="gi2" value="23/2025">
                        </label>&nbsp;&nbsp;&nbsp;
                        <label for="gi3" class="radio-inline">24/2025
                            <input type="checkbox" id="gi3" name="gi3" value="24/2025">
                        </label><br><br>
                        <a style="color:red;" href="https://drive.google.com/file/d/1jy54wbfiKRl2OcxrRoOnJyt-drhJDmQm/view?usp=sharing">***Click Here To View PDF of GI-22/2025***</a><br><br>
                        <a style="color:red;" href="https://drive.google.com/file/d/1XIYvBD3q6JrL1I2ve-HPCU6H6GuTQvvG/view?usp=sharing">***Click Here To View PDF of GI-23/2025***</a><br><br>
                        <a style="color:red;" href="https://drive.google.com/file/d/1DUWiPeN_P9Oq120hZ4nxumHNfOue38j0/view?usp=sharing">***Click Here To View PDF of GI-24/2025***</a>
                    </div> <br> 
                    </div> 
             <div class="justify-content">
            <label style="color: red; font-weight: bold;">Select CASE STUDY</label>
            <div class="container">
                <label for="cs1" class="radio-inline">19/2025
                    <input type="checkbox" id="cs1" name="cs1" value="19/2025">
                </label>&nbsp;&nbsp;&nbsp;&nbsp;
                 <label for="cs2" class="radio-inline">20/2025
                    <input type="checkbox" id="cs2" name="cs2" value="20/2025">
                </label>&nbsp;&nbsp;&nbsp;&nbsp;
               <label for="cs3" class="radio-inline">18/2025
                    <input type="checkbox" id="cs3" name="cs3" value="18/2025">
                </label><br><br>
                <a style="color:red;" href="https://drive.google.com/file/d/1mbkDfqlE_w4ddFCM50BbgVCbrfw_6jpm/view?usp=sharing">***Click Here To View PDF Case Study-19/2025***</a><br><br>
                <a style="color:red;" href="https://drive.google.com/file/d/1z41ijNuS1Wixa2mDpans_bWlYV-GKlhT/view?usp=sharing">***Click Here To View PDF Case Study-20/2025***</a><br><br>
                <a style="color:red;" href="https://drive.google.com/file/d/1Ju2DQaho4T2BnhFAMxLgLmm9GRIDGWK6/view?usp=sharing">***Click Here To View PDF Case Study-18/2025***</a>
                
            </div> <br>
            <div class="form-outer">
                <input type="submit" id="sub" style="background: #140149;color: rgb(247, 243, 243); height: 70px; font-size: x-large;">
            </div>
        </form>
    </div>

    <script>
        // Wait for DOM to be fully loaded before executing scripts
        document.addEventListener('DOMContentLoaded', function() {
            // Constants for Google Sheets API
            const sheetID = '1bGIcj3rrwJANyo3LOgiYxvXtjLmA_jLb3j2Ol0Mtd08';
            const apiKey = 'AIzaSyBG5Y_6PX9WT-0Mu5-Wv8Z9hA6ATF3TqR0';
            const dataRange = 'Sheet1!A2:K2000';
            const sheetURL = `https://sheets.googleapis.com/v4/spreadsheets/${sheetID}/values/${dataRange}?key=${apiKey}`;
            
            // Initialize date restrictions
            setupDateRestrictions();
            
            // Fetch sheet data when page loads
            fetchSheetData();
            
            // Set up all event listeners
            setupEventListeners();
            
            // Load saved form data if it exists
            loadFormData();
            
            // Function to set up date restrictions
            function setupDateRestrictions() {
                const today = new Date();
                const yesterday = new Date(today);
                yesterday.setDate(today.getDate() - 1);
                
                document.getElementById('inspectiondate').min = formatDate(yesterday);
                document.getElementById('inspectiondate').max = formatDate(today);
            }
            
            // Helper function to format date as YYYY-MM-DD
            function formatDate(date) {
                return date.toISOString().split('T')[0];
            }
            
            // Fetch data from Google Sheets
            function fetchSheetData() {
                fetch(sheetURL)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        return response.json();
                    })
                    .then(data => {
                        window.sheetData = data.values;
                        console.log('Data loaded successfully');
                    })
                    .catch(error => {
                        console.error('Error fetching data from Google Sheets:', error);
                        alert('Error loading data. Please refresh the page.');
                    });
            }
            
            // Save form data to localStorage
            function saveFormData() {
                const formData = {};
                const form = document.getElementById('inspectionForm');
                const formElements = form.elements;
                
                // Save all form inputs
                for (let i = 0; i < formElements.length; i++) {
                    const element = formElements[i];
                    
                    if (element.name) {
                        if (element.type === 'checkbox' || element.type === 'radio') {
                            if (element.checked) {
                                formData[element.name] = element.value;
                            }
                        } else {
                            formData[element.name] = element.value;
                        }
                    }
                }
                
                // Save checkboxes separately since multiple can be checked
                const checkboxes = ['sd1', 'sd2', 'sd3', 'gi1', 'gi2', 'gi3', 'cs1', 'cs2', 'cs3'];
                checkboxes.forEach(name => {
                    const checkbox = document.querySelector(`input[name="${name}"]`);
                    if (checkbox) {
                        formData[name] = checkbox.checked;
                    }
                });
                
                localStorage.setItem('footplateInspectionFormData', JSON.stringify(formData));
            }
            
            // Load form data from localStorage
            function loadFormData() {
                const savedData = localStorage.getItem('footplateInspectionFormData');
                if (!savedData) return;
                
                const formData = JSON.parse(savedData);
                const form = document.getElementById('inspectionForm');
                const formElements = form.elements;
                
                // Restore all form inputs
                for (let i = 0; i < formElements.length; i++) {
                    const element = formElements[i];
                    
                    if (element.name && formData[element.name] !== undefined) {
                        if (element.type === 'checkbox' || element.type === 'radio') {
                            if (element.value === formData[element.name]) {
                                element.checked = true;
                            }
                        } else {
                            element.value = formData[element.name];
                        }
                    }
                }
                
                // Restore checkboxes
                const checkboxes = ['sd1', 'sd2', 'sd3', 'gi1', 'gi2', 'gi3', 'cs1', 'cs2', 'cs3'];
                checkboxes.forEach(name => {
                    const checkbox = document.querySelector(`input[name="${name}"]`);
                    if (checkbox && formData[name] !== undefined) {
                        checkbox.checked = formData[name];
                    }
                });
                
                // Trigger any necessary change events
                if (formData.trainNumber) checkTrainType();
                if (formData.trainLoad) checkTrainLoad();
                if (formData.startTime || formData.endTime) checkDayNight();
                
                console.log('Form data restored from localStorage');
            }
            
            // Clear form data from localStorage
            function clearFormData() {
                localStorage.removeItem('footplateInspectionFormData');
            }
            
            // Set up all event listeners
            function setupEventListeners() {
                // Form submission
                const form = document.getElementById('inspectionForm');
                if (form) {
                    form.addEventListener('submit', handleFormSubmit);
                }
                
                // Save form data on any input change
                form.addEventListener('input', function() {
                    saveFormData();
                });
                
                // Save form data on any checkbox/radio change
                form.addEventListener('change', function() {
                    saveFormData();
                });
                
                // Input fields
                const lpcmsid = document.getElementById('lpcmsid');
                const alpcmsid = document.getElementById('alpcmsid');
                const inspectionid = document.getElementById('inspectionid');
                const trainNumber = document.getElementById('trainNumber');
                const trainLoad = document.getElementById('trainLoad');
                const lpcat = document.getElementById('lpcat');
                const inspectiondate = document.getElementById('inspectiondate');
                const startTimeInput = document.getElementById('startTime');
                const endTimeInput = document.getElementById('endTime');
                
                if (lpcmsid) lpcmsid.addEventListener('input', autoFillLPDetails);
                if (alpcmsid) alpcmsid.addEventListener('input', autoFillALPDetails);
                if (inspectionid) inspectionid.addEventListener('input', autoFillDetails);
                if (trainNumber) trainNumber.addEventListener('input', checkTrainType);
                if (trainLoad) trainLoad.addEventListener('input', checkTrainLoad);
                if (lpcat) lpcat.addEventListener('change', setDueDate);
                if (inspectiondate) inspectiondate.addEventListener('change', setDueDate);
                
                // Radio buttons for LP selection
                document.querySelectorAll('input[name="selectlp"]').forEach(radio => {
                    radio.addEventListener('change', setDueDate);
                });
                
                // Time inputs for day/night check
                if (startTimeInput && endTimeInput) {
                    startTimeInput.addEventListener('change', checkDayNight);
                    endTimeInput.addEventListener('change', function() {
                        const startTime = new Date(startTimeInput.value);
                        const endTime = new Date(this.value);
                        
                        if (startTime && endTime && endTime <= startTime) {
                            alert('End time cannot be less than or equal to start time. Please select a NEXT date.');
                            this.value = '';
                        }
                        checkDayNight();
                    });
                }
            }
            
            // Auto-fill LP details based on CMS ID
            function autoFillLPDetails() {
                const lpcmsid = document.getElementById('lpcmsid').value;
                if (!lpcmsid || !window.sheetData) return;
                
                const matchingRow = window.sheetData.find(row => row[2] == lpcmsid);
                if (matchingRow) {
                    document.getElementById('lpname').value = matchingRow[3] || '';
                    
                    // Set LP Type
                    const lpTypeSelect = document.getElementById('lptype');
                    if (lpTypeSelect) {
                        lpTypeSelect.value = matchingRow[4] || '';
                    }
                    
                    // Set LP Category
                    const lpCatSelect = document.getElementById('lpcat');
                    if (lpCatSelect) {
                        lpCatSelect.value = matchingRow[5] || '';
                    }
                    
                    // Set LP HQ
                    const lpHQSelect = document.getElementById('lphq');
                    if (lpHQSelect) {
                        lpHQSelect.value = matchingRow[6] || '';
                    }
                    
                    setDueDate();
                } else {
                    clearLPFields();
                }
            }
            
            // Auto-fill ALP details based on CMS ID
            function autoFillALPDetails() {
                const alpcmsid = document.getElementById('alpcmsid').value;
                if (!alpcmsid || !window.sheetData) return;
                
                const matchingRow = window.sheetData.find(row => row[2] == alpcmsid);
                if (matchingRow) {
                    document.getElementById('alpname').value = matchingRow[3] || '';
                    
                    // Set ALP Designation
                    const alpDesgSelect = document.getElementById('alpdesg');
                    if (alpDesgSelect) {
                        alpDesgSelect.value = matchingRow[4] || '';
                    }
                    
                    // Set ALP HQ
                    const alpHQSelect = document.getElementById('alphq');
                    if (alpHQSelect) {
                        alpHQSelect.value = matchingRow[6] || '';
                    }
                } else {
                    clearALPFields();
                }
            }
            
            // Auto-fill CLI details based on Inspection ID
            function autoFillDetails() {
                const inspectionID = document.getElementById('inspectionid').value;
                if (!inspectionID || !window.sheetData) return;
                
                const matchingRow = window.sheetData.find(row => row[0] == inspectionID);
                if (matchingRow) {
                    document.getElementById('cliname').value = matchingRow[1] || '';
                }
            }
            
            // Clear LP fields
            function clearLPFields() {
                document.getElementById('lpname').value = '';
                document.getElementById('lptype').value = '';
                document.getElementById('lpcat').value = '';
                document.getElementById('lphq').value = '';
            }
            
            // Clear ALP fields
            function clearALPFields() {
                document.getElementById('alpname').value = '';
                document.getElementById('alpdesg').value = '';
                document.getElementById('alphq').value = '';
            }
            
            // Check train type based on train number
            function checkTrainType() {
                const trainNumber = document.getElementById('trainNumber').value;
                const isNumeric = /^[0-9]+$/.test(trainNumber);
                
                if (isNumeric) {
                    document.getElementById('coach').checked = true;
                    document.getElementById('goods').checked = false;
                } else {
                    document.getElementById('goods').checked = true;
                    document.getElementById('coach').checked = false;
                }
                
                saveFormData();
            }
            
            // Check train load (loaded/empty)
            function checkTrainLoad() {
                const trainLoad = parseFloat(document.getElementById('trainLoad').value) || 0;
                
                if (trainLoad > 1500) {
                    document.getElementById('load').checked = true;
                    document.getElementById('empty').checked = false;
                } else {
                    document.getElementById('empty').checked = true;
                    document.getElementById('load').checked = false;
                }
                
                saveFormData();
            }
            
            // Set due date based on inspection date and LP category
            function setDueDate() {
                const inspectionDate = document.getElementById('inspectiondate').value;
                const nominated = document.querySelector('input[name="selectlp"]:checked')?.value === 'NOMINATED';
                const lpCategory = document.getElementById('lpcat').value;
                
                if (!inspectionDate || !lpCategory || !nominated) {
                    document.getElementById('lpduedate').value = '';
                    return;
                }
                
                const date = new Date(inspectionDate);
                
                if (lpCategory === 'A') {
                    date.setMonth(date.getMonth() + 2);
                } else if (lpCategory === 'B') {
                    date.setMonth(date.getMonth() + 1);
                } else if (lpCategory === 'C') {
                    date.setDate(date.getDate() + 15);
                }
                
                document.getElementById('lpduedate').value = formatDate(date);
                saveFormData();
            }
            
            // Check if it's day or night based on time
            function checkDayNight() {
                const startTime = document.getElementById('startTime').value;
                const endTime = document.getElementById('endTime').value;
                const timeToCheck = startTime || endTime;
                
                if (!timeToCheck) return;
                
                const hours = new Date(timeToCheck).getHours();
                const isNight = hours >= 22 || hours < 6;
                
                document.getElementById('night').checked = isNight;
                document.getElementById('day').checked = !isNight;
                
                saveFormData();
            }
            
            // Handle form submission
            function handleFormSubmit(e) {
                e.preventDefault();
                const submitBtn = document.querySelector("#sub");
                const form = e.target;
                
                submitBtn.value = "Submitting...";
                submitBtn.disabled = true;
                
                try {
                    // Convert all text inputs to uppercase
                    const inputs = form.querySelectorAll('input[type="text"], input[type="number"], textarea');
                    inputs.forEach(input => {
                        if (input.value) {
                            input.value = input.value.toUpperCase();
                        }
                    });
                    
                    const data = new FormData(form);
                    
                    fetch('https://script.google.com/macros/s/AKfycbwtT2jXOGlMg_VgFNG-PrHHu6p_v3aTFDgneth-1pAOGCakOH-5xLq2GYK8VYIzyVaa/exec', {
                        method: "POST",
                        body: data
                    })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        return response.text();
                    })
                    .then(data => {
                        alert("Footplating Data Saved Successfully!");
                        form.reset();
                        clearFormData(); // Clear saved data after successful submission
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert("Error submitting form. Please try again.");
                    })
                    .finally(() => {
                        submitBtn.value = "Submit";
                        submitBtn.disabled = false;
                    });
                } catch (error) {
                    console.error('Submission error:', error);
                    alert("Error submitting form. Please try again.");
                    submitBtn.value = "Submit";
                    submitBtn.disabled = false;
                }
            }
        });
    </script>
</body>
</html>